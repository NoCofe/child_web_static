<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>暖时光 - 陪伴孩子的时光是暖洋洋的</title>
    <meta name="description" content="为0-6岁孩子生成每日个性化学习计划，提供步骤清晰的活动与家长指导，自动记录并生成成长报告，省心省钱更有效。">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#007AFF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="暖时光">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="暖时光">
    
    <!-- PWA Icons -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/icon-128x128.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/icon-128x128.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/icon-72x72.png">
    
    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#007AFF">
    <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #007AFF;
            --secondary-color: #5AC8FA;
            --text-primary: #1D1D1F;
            --text-secondary: #86868B;
            --background: #FBFBFD;
            --surface: #FFFFFF;
            --border: #D2D2D7;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            line-height: 1.47;
            color: var(--text-primary);
            background: var(--background);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(251, 251, 253, 0.8);
            backdrop-filter: saturate(180%) blur(20px);
            border-bottom: 0.5px solid var(--border);
            z-index: 100;
        }

        .nav-container {
            max-width: 1024px;
            margin: 0 auto;
            padding: 0 22px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 44px;
        }

        .nav-logo {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 40px;
            list-style: none;
        }

        .nav-link {
            color: var(--text-primary);
            text-decoration: none;
            font-size: 12px;
            font-weight: 400;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: var(--primary-color);
        }

        .nav-cta {
            background: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 14px;
            text-decoration: none;
            font-size: 12px;
            font-weight: 400;
            transition: all 0.3s ease;
        }

        .nav-cta:hover {
            transform: scale(1.05);
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-install {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 4px 12px;
            border-radius: 14px;
            font-size: 12px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .nav-install:hover {
            transform: scale(1.05);
            background: #4FC3F7;
        }

        .nav-install svg {
            width: 14px;
            height: 14px;
        }

        /* 安装引导弹窗 */
        .install-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .install-modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--surface);
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .install-modal h3 {
            color: var(--text-primary);
            font-size: 20px;
            margin-bottom: 15px;
        }

        .install-modal p {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .install-steps {
            text-align: left;
            margin: 20px 0;
        }

        .install-step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: var(--background);
            border-radius: 10px;
        }

        .install-step-number {
            background: var(--primary-color);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .install-step-text {
            font-size: 14px;
            color: var(--text-primary);
        }

        .install-modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }

        .install-modal-button {
            padding: 10px 20px;
            border-radius: 12px;
            border: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .install-modal-button.primary {
            background: var(--primary-color);
            color: white;
        }

        .install-modal-button.primary:hover {
            background: #0056CC;
        }

        .install-modal-button.secondary {
            background: var(--background);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .install-modal-button.secondary:hover {
            background: var(--border);
        }

        /* 安装成功提示 */
        .install-success {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background: #34C759;
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 14px;
            z-index: 1001;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Hero Section */
        .hero {
            padding: 120px 22px 80px;
            text-align: center;
            background: var(--surface);
        }

        .hero-container {
            max-width: 980px;
            margin: 0 auto;
        }

        .hero-headline {
            font-size: 56px;
            font-weight: 600;
            line-height: 1.07;
            letter-spacing: -0.005em;
            margin-bottom: 18px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subheadline {
            font-size: 28px;
            font-weight: 400;
            line-height: 1.14;
            letter-spacing: 0.007em;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .hero-description {
            font-size: 19px;
            line-height: 1.42;
            font-weight: 400;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-cta {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 60px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            padding: 12px 24px;
            border-radius: 22px;
            text-decoration: none;
            font-size: 17px;
            font-weight: 400;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover {
            transform: scale(1.05);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-color);
            padding: 12px 24px;
            border: 1px solid var(--primary-color);
            border-radius: 22px;
            text-decoration: none;
            font-size: 17px;
            font-weight: 400;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
        }

        .hero-visual {
            position: relative;
            margin-top: 40px;
        }

        .hero-image {
            width: 100%;
            max-width: 600px;
            height: 400px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        /* Features Section */
        .features {
            padding: 80px 22px;
            background: var(--background);
        }

        .features-container {
            max-width: 1024px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-title {
            font-size: 48px;
            font-weight: 600;
            line-height: 1.08;
            letter-spacing: -0.003em;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .section-subtitle {
            font-size: 21px;
            line-height: 1.38;
            font-weight: 400;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
        }

        .feature-card {
            background: var(--surface);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: var(--primary-color);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            font-size: 24px;
            color: white;
        }

        .feature-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .feature-description {
            font-size: 17px;
            line-height: 1.47;
            color: var(--text-secondary);
        }

        /* Product Showcase */
        .showcase {
            padding: 80px 22px;
            background: var(--surface);
        }

        .showcase-container {
            max-width: 1024px;
            margin: 0 auto;
        }

        .showcase-item {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            margin-bottom: 100px;
        }

        .showcase-item:nth-child(even) .showcase-content {
            order: 2;
        }

        .showcase-item:nth-child(even) .showcase-visual {
            order: 1;
        }

        .showcase-title {
            font-size: 40px;
            font-weight: 600;
            line-height: 1.1;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .showcase-description {
            font-size: 19px;
            line-height: 1.42;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        .showcase-features {
            list-style: none;
        }

        .showcase-features li {
            font-size: 17px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
        }

        .showcase-features li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: 600;
        }

        .showcase-image {
            width: 100%;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        /* Stats Section */
        .stats {
            padding: 80px 22px;
            background: var(--background);
        }

        .stats-container {
            max-width: 1024px;
            margin: 0 auto;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-top: 60px;
        }

        .stat-item {
            padding: 20px;
        }

        .stat-number {
            font-size: 48px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 17px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .stat-description {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* CTA Section */
        .cta {
            padding: 80px 22px;
            background: var(--surface);
            text-align: center;
        }

        .cta-container {
            max-width: 680px;
            margin: 0 auto;
        }

        .cta-title {
            font-size: 40px;
            font-weight: 600;
            line-height: 1.1;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .cta-description {
            font-size: 19px;
            line-height: 1.42;
            color: var(--text-secondary);
            margin-bottom: 40px;
        }

        /* Footer */
        .footer {
            background: var(--background);
            padding: 40px 22px;
            border-top: 1px solid var(--border);
        }

        .footer-container {
            max-width: 1024px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
        }

        .footer-section h4 {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section li {
            margin-bottom: 8px;
        }

        .footer-section a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 12px;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--primary-color);
        }

        .footer-bottom {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            text-align: center;
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-headline {
                font-size: 36px;
            }

            .hero-subheadline {
                font-size: 21px;
            }

            .hero-description {
                font-size: 17px;
            }

            .hero-cta {
                flex-direction: column;
                align-items: center;
            }

            .section-title {
                font-size: 32px;
            }

            .showcase-item {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .showcase-item:nth-child(even) .showcase-content,
            .showcase-item:nth-child(even) .showcase-visual {
                order: unset;
            }

            .showcase-title {
                font-size: 28px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .cta-title {
                font-size: 28px;
            }
        }

        /* Animation */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="#" class="nav-logo">暖时光</a>
            <ul class="nav-links">
                <li><a href="/" class="nav-link">首页</a></li>
                <li><a href="/features" class="nav-link">功能</a></li>
                <li><a href="/solutions" class="nav-link">解决方案</a></li>
                <li><a href="/about" class="nav-link">关于我们</a></li>
            </ul>
            <div class="nav-actions">
                <button id="installButton" class="nav-install" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7,10 12,15 17,10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    安装应用
                </button>
                <a href="#" class="nav-cta">关注上线</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <h1 class="hero-headline">A专业成长陪伴</h1>
            <h2 class="hero-subheadline">为0-6岁孩子量身定制</h2>
            <p class="hero-description">
                每日个性化学习计划，专业指导，成长记录<br>
                在家也能享受高质量亲子陪伴
            </p>
            <div class="hero-cta">
                <a href="#" class="btn-primary">立即体验</a>
                <a href="#" class="btn-secondary">了解更多</a>
            </div>
            <div class="hero-visual">
                <img src="https://images.unsplash.com/photo-1609220136736-443140cffec6?w=600&h=400&fit=crop&crop=face"
                     alt="温馨的亲子时光"
                     class="hero-image">
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="features-container">
            <div class="section-header">
                <h2 class="section-title">为什么选择暖时光</h2>
                <p class="section-subtitle">结合专家建议和专业陪伴理念，为每个孩子量身定制成长方案</p>
            </div>
            <div class="features-grid">
                <div class="feature-card fade-in">
                    <div class="feature-icon">🧠</div>
                    <h3 class="feature-title">个性化计划</h3>
                    <p class="feature-description">
                        基于年龄与历史记录，自动规划高质量活动，涵盖语言、体能、认知等全方位发展
                    </p>
                </div>
                <div class="feature-card fade-in">
                    <div class="feature-icon">👨‍🏫</div>
                    <h3 class="feature-title">专业指导</h3>
                    <p class="feature-description">
                        步骤清晰、家长指导完善，让每个家长都能轻松开展高质量的亲子活动
                    </p>
                </div>
                <div class="feature-card fade-in">
                    <div class="feature-icon">📊</div>
                    <h3 class="feature-title">成长追踪</h3>
                    <p class="feature-description">
                        自动记录学习数据，生成成长报告与能力雷达，科学见证每一点进步
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Product Showcase -->
    <section class="showcase">
        <div class="showcase-container">
            <div class="showcase-item fade-in">
                <div class="showcase-content">
                    <h3 class="showcase-title">今日学习计划</h3>
                    <p class="showcase-description">
                        孩子今天做什么，一目了然。预计时长与难度可控，让每一天的陪伴都有明确目标。
                    </p>
                    <ul class="showcase-features">
                        <li>智能分析孩子发展阶段</li>
                        <li>每日3-5个高质量活动</li>
                        <li>涵盖8大发展维度</li>
                        <li>时长难度精准预估</li>
                    </ul>
                </div>
                <div class="showcase-visual">
                    <img src="https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=500&h=400&fit=crop"
                         alt="学习计划界面"
                         class="showcase-image">
                </div>
            </div>

            <div class="showcase-item fade-in">
                <div class="showcase-content">
                    <h3 class="showcase-title">专业活动指导</h3>
                    <p class="showcase-description">
                        所需材料与步骤清晰，家长轻松跟做。每个环节都有专业指导和安全提示。
                    </p>
                    <ul class="showcase-features">
                        <li>详细的材料准备清单</li>
                        <li>步骤分解清晰易懂</li>
                        <li>专业的家长引导话术</li>
                        <li>完善的安全注意事项</li>
                    </ul>
                </div>
                <div class="showcase-visual">
                    <img src="https://images.unsplash.com/photo-1511895426328-dc8714191300?w=500&h=400&fit=crop"
                         alt="活动指导界面"
                         class="showcase-image">
                </div>
            </div>

            <div class="showcase-item fade-in">
                <div class="showcase-content">
                    <h3 class="showcase-title">成长数据可视化</h3>
                    <p class="showcase-description">
                        能力维度可视化，见证每一点进步。通过数据了解孩子发展状况，科学调整陪伴策略。
                    </p>
                    <ul class="showcase-features">
                        <li>多维度能力评估</li>
                        <li>直观的雷达图展示</li>
                        <li>成长趋势分析</li>
                        <li>个性化建议推荐</li>
                    </ul>
                </div>
                <div class="showcase-visual">
                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=500&h=400&fit=crop"
                         alt="成长报告界面"
                         class="showcase-image">
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="stats-container">
            <div class="section-header">
                <h2 class="section-title">值得信赖的选择</h2>
                <p class="section-subtitle">科学有效的陪伴活动，已经帮助众多家庭实现高质量陪伴</p>
            </div>
            <div class="stats-grid">
                <div class="stat-item fade-in">
                    <div class="stat-number">1000+</div>
                    <div class="stat-label">服务家庭</div>
                    <div class="stat-description">内测期间积累</div>
                </div>
                <div class="stat-item fade-in">
                    <div class="stat-number">¥800+</div>
                    <div class="stat-label">平均月节省</div>
                    <div class="stat-description">育儿机构费用</div>
                </div>
                <div class="stat-item fade-in">
                    <div class="stat-number">4.9</div>
                    <div class="stat-label">用户评分</div>
                    <div class="stat-description">家长满意度</div>
                </div>
                <div class="stat-item fade-in">
                    <div class="stat-number">100+</div>
                    <div class="stat-label">连续使用天数</div>
                    <div class="stat-description">TOP用户记录</div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
        <div class="cta-container">
            <h2 class="cta-title">开始您的暖时光之旅</h2>
            <p class="cta-description">
                App即将上线，现在关注可第一时间获得体验资格。<br>
                让科学的成长陪伴从今天开始。
            </p>
            <div class="hero-cta">
                <a href="#" class="btn-primary">关注上线动态</a>
                <a href="#" class="btn-secondary">了解更多功能</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h4>产品</h4>
                <ul>
                    <li><a href="/features">功能特性</a></li>
                    <li><a href="/solutions">解决方案</a></li>
                    <li><a href="/music">音乐</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>支持</h4>
                <ul>
                    <li><a href="/faq">常见问题</a></li>
                    <li><a href="/about">关于我们</a></li>
                    <li><a href="/privacy">隐私政策</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>联系方式</h4>
                <ul>
                    <li><a href="#">微信公众号</a></li>
                    <li><a href="#">客服邮箱</a></li>
                    <li><a href="#">商务合作</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>公司</h4>
                <ul>
                    <li><a href="#">新闻动态</a></li>
                    <li><a href="#">加入我们</a></li>
                    <li><a href="#">投资者关系</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 暖时光. 保留所有权利。</p>
        </div>
    </footer>

    <!-- 安装引导弹窗 -->
    <div id="installModal" class="install-modal">
        <div class="install-modal-content">
            <h3>安装暖时光到桌面</h3>
            <p>将暖时光添加到主屏幕，享受更好的使用体验</p>
            <div id="installSteps" class="install-steps">
                <!-- 步骤内容将通过JavaScript动态生成 -->
            </div>
            <div class="install-modal-buttons">
                <button class="install-modal-button secondary" onclick="closeInstallModal()">稍后再说</button>
                <button id="installModalButton" class="install-modal-button primary">立即安装</button>
            </div>
        </div>
    </div>

    <!-- 安装成功提示 -->
    <div id="installSuccess" class="install-success">
        ✅ 暖时光已成功添加到桌面！
    </div>

    <script>
        // PWA 相关变量
        let deferredPrompt;
        const installButton = document.getElementById('installButton');
        const installModal = document.getElementById('installModal');
        const installModalButton = document.getElementById('installModalButton');
        const installSuccess = document.getElementById('installSuccess');
        const installSteps = document.getElementById('installSteps');

        // 平台检测
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        const isAndroid = /Android/.test(navigator.userAgent);
        const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
        const isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        const isEdge = /Edg/.test(navigator.userAgent);
        const isInStandaloneMode = ('standalone' in window.navigator) && (window.navigator.standalone);
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches;

        // Service Worker 注册
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // 生成安装步骤
        function generateInstallSteps() {
            let steps = [];
            
            if (isIOS && isSafari) {
                steps = [
                    '点击底部的分享按钮 📤',
                    '向下滑动找到"添加到主屏幕"',
                    '点击"添加到主屏幕"',
                    '点击右上角的"添加"确认'
                ];
            } else if (isAndroid && isChrome) {
                steps = [
                    '点击浏览器菜单 ⋮',
                    '选择"添加到主屏幕"',
                    '确认应用名称',
                    '点击"添加"完成安装'
                ];
            } else if (isChrome || isEdge) {
                steps = [
                    '点击地址栏右侧的安装图标 ⬇️',
                    '在弹出窗口中点击"安装"',
                    '等待应用下载完成',
                    '享受桌面应用体验！'
                ];
            } else {
                steps = [
                    '点击浏览器菜单',
                    '寻找"添加到主屏幕"或"安装"选项',
                    '按照提示完成安装',
                    '从桌面或应用列表启动'
                ];
            }

            installSteps.innerHTML = steps.map((step, index) => `
                <div class="install-step">
                    <div class="install-step-number">${index + 1}</div>
                    <div class="install-step-text">${step}</div>
                </div>
            `).join('');
        }

        // 显示安装弹窗
        function showInstallModal() {
            generateInstallSteps();
            installModal.style.display = 'block';
            
            // 根据平台调整按钮文本和行为
            if (deferredPrompt) {
                installModalButton.textContent = '立即安装';
                installModalButton.onclick = async () => {
                    try {
                        deferredPrompt.prompt();
                        const { outcome } = await deferredPrompt.userChoice;
                        console.log(`User response: ${outcome}`);
                        
                        if (outcome === 'accepted') {
                            showInstallSuccess();
                            closeInstallModal();
                            installButton.style.display = 'none';
                        }
                        
                        deferredPrompt = null;
                    } catch (error) {
                        console.error('Install prompt failed:', error);
                    }
                };
            } else {
                installModalButton.textContent = '我知道了';
                installModalButton.onclick = () => {
                    closeInstallModal();
                    // 记住用户已经看过安装指引
                    localStorage.setItem('installGuideShown', 'true');
                };
            }
        }

        // 关闭安装弹窗
        function closeInstallModal() {
            installModal.style.display = 'none';
        }

        // 显示安装成功提示
        function showInstallSuccess() {
            installSuccess.style.display = 'block';
            setTimeout(() => {
                installSuccess.style.display = 'none';
            }, 3000);
        }

        // PWA 安装提示事件
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('beforeinstallprompt event fired');
            e.preventDefault();
            deferredPrompt = e;
            installButton.style.display = 'flex';
        });

        // 安装按钮点击事件
        installButton.addEventListener('click', () => {
            showInstallModal();
        });

        // 检测应用是否已安装
        window.addEventListener('appinstalled', (evt) => {
            console.log('App was installed');
            installButton.style.display = 'none';
            showInstallSuccess();
        });

        // 点击弹窗外部关闭
        installModal.addEventListener('click', (e) => {
            if (e.target === installModal) {
                closeInstallModal();
            }
        });

        // 初始化安装按钮显示逻辑
        function initInstallButton() {
            // 如果已经在独立模式下运行，隐藏安装按钮
            if (isStandalone || isInStandaloneMode) {
                console.log('App is running in standalone mode');
                installButton.style.display = 'none';
                return;
            }

            // 检查是否已经显示过安装指引
            const guideShown = localStorage.getItem('installGuideShown');
            
            // 对于支持PWA但没有beforeinstallprompt的情况
            if ((isIOS && isSafari) || (isAndroid && !deferredPrompt)) {
                if (!guideShown) {
                    installButton.style.display = 'flex';
                    installButton.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7,10 12,15 17,10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        添加到主屏
                    `;
                }
            }

            // 延迟显示安装提示（给用户一些时间浏览网站）
            if (!guideShown && !isStandalone && !isInStandaloneMode) {
                setTimeout(() => {
                    if (installButton.style.display !== 'none') {
                        // 可以在这里添加更温和的提示，比如小动画
                        installButton.style.animation = 'pulse 2s infinite';
                    }
                }, 10000); // 10秒后开始提示
            }
        }

        // 添加脉冲动画
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化动画观察器
            const fadeElements = document.querySelectorAll('.fade-in');
            fadeElements.forEach(element => {
                observer.observe(element);
            });

            // 初始化安装按钮
            initInstallButton();
        });

        // 全局函数供HTML调用
        window.closeInstallModal = closeInstallModal;
    </script>
</body>
</html>
